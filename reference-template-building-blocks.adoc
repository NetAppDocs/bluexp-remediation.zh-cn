---
sidebar: sidebar 
permalink: reference-template-building-blocks.html 
keywords: templates, conditions, conditional actions, template controls, passing values 
summary: 在构建模板时，您可以使用某些功能在操作之间传递值（例如卷名称），在有条件的情况下分支以将操作连接在一起（在新卷上启用备份），以及帮助用户在使用此模板时自定义资源。 
---
= 模板组件
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./media/


[role="lead"]
在构建模板时，您可以使用某些功能在操作之间传递值（例如卷名称），在有条件的情况下分支以将操作连接在一起（在新卷上启用备份），以及帮助用户在使用此模板时自定义资源。



== 特殊模板控件

在开始创建模板之前，您应了解在模板中预先填充参数值时可以设置的一些特殊选项。

image:screenshot_template_options.png["您可以为参数值设置的选项的可编辑和偏移屏幕截图。"]



=== 可编辑复选框

选中此框可使存储管理员覆盖您在模板中输入的预填充值。这样，存储管理员就可以为该值提供建议，但可以在创建资源时自定义该值。

如果未选中此复选框，则用户无法更改此值，并且管理员部署资源时始终会使用模板中的硬编码值。



=== Drift 复选框

选中此框可使BlueXP监控使用模板创建资源时为参数输入的硬编码值。稍后，您可以运行 " 漂移报告 " 来查看哪些配置了 " 漂移 " 的字段不再符合模板设置。

如果未选中此复选框，则用户可以在创建资源后将此值更改为任何值。


NOTE: 要使偏移功能正常工作，在为模板中的某些参数定义偏移后，必须为此模板启用偏移功能。这是创建模板的最后一步。如果为某个参数启用了偏移，但尚未在模板上启用该偏移，则该偏移将不起作用。



=== 在字段中使用正则表达式（ regex ）

模板中有几个字段可用于输入正则表达式以定义管理员可以在字段中输入的值，例如 " 卷名称 " 和 " 共享名称 " 。

image:screenshot_template_regex.png["使用正则表达式定义卷名称允许的值的屏幕截图。"]

例如，如果您输入 "^ [a-zA-Z][0-9a-zA-Z_] ｛ 0 ， 149 ｝ $" 作为卷名称的正则表达式，则表示 "_the name should start with an alife character ， it can contain only numbers ， letters ， or the underscore ， and it should be 150 or fewer characters in lage_".



== 在模板操作之间传递值

模板可以使用先前操作中的信息在未来操作中填充字段。例如，在定义要启用 Cloud Backup 功能的卷的名称时，您可以指示备份操作使用在创建 Cloud Volumes ONTAP 操作中输入的存储管理员值作为卷的名称。

AppTemplate 服务可以使用三种类型的信息：

* 输入值—这是存储管理员在先前模板操作的字段中输入的实际值。
* 输出值—这是BlueXP通过先前的模板操作创建资源后生成的值。
* 输入您自己的值—这是您输入的值；不能通过模板中的先前操作访问它。


例如、要对卷启用合规性扫描、Cloud Data sense服务需要存储管理员输入的"卷名称"(输入值)以及BlueXP在创建卷时生成的"卷uuid"(输出值)。

下图显示了如何在模板的 " 云数据感知操作 " 部分中输入此信息。

image:screenshot_template_variable_input_output.png["显示如何使用在上一操作中输入的值在另一操作中填充字段的图示。"]



== 使用条件根据逻辑语句执行不同的操作

条件指示模板执行不同的操作，具体取决于存储管理员运行模板时条件是 true 还是 false 。您可以通过选择 * 逻辑条件 * 操作来添加条件：

image:screenshot_template_select_condition.png["有关如何在模板中添加条件语句的屏幕截图。"]

例如，您可能有一条准则，即如果卷的容量大于 50 GB ，则需要在该卷上启用 Cloud Backup 。如果卷的容量较小，则不会启用 Cloud Backup 。您可以在模板中实施此功能，如下所示。

image:screenshot_template_condition_example.png["屏幕截图显示了如何在模板中使用条件以有条件地启用 Cloud Backup 。"]

条件包括两部分：

* rules —要检查的项目是否为 true 或 false 。
* 和 / 或语句—允许您使用多个规则来进一步细化是否添加其他操作。


规则由三部分组成：

* 源字段 * —从中获取值进行比较的位置。

* 从操作中获取输入值—存储管理员在先前模板操作的字段中输入的实际值。
* 从操作中获取输出值—通过先前的模板操作创建资源后生成的值BlueXP。
* 输入值 - 这是您输入的值；不能通过模板中的先前操作访问此值。此值可以是已存在的资源的值，例如现有卷。


* 运算符 * —用于比较的运算符。选项包括 * 等效 * ， * 不等 * ， * 大于 * ， * 小于 * ， * 大于或等于 * ， * 小于或等于 * 。

* 字段值 * —要比较的实际值。这些选项与 _Source field_ 的选项相同。

通过和 / 或语句，您可以根据多个规则的评估结果为 True 还是 False ，在用户运行模板时为其有条件地添加更多操作。* 和 * 要求所有规则均为 true 或 false ， * 或 * 仅要求其中一个规则必须为 true 或 false 。

在规则中同时使用 AND 和 OR 语句时，评估过程遵循标准数学顺序，即 "and" 在 "or" 前面。例如：

* <Rule1> 或 <Rule2> 和 <Rule3>
+
此语句按以下顺序进行评估： <Rule1> 或（ <Rule2> 和 <Rule3> ）


